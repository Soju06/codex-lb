# Database
CODEX_LB_DATABASE_URL=sqlite+aiosqlite:///~/.codex-lb/store.db
# Optional PostgreSQL example (SQLite stays default if not set):
# CODEX_LB_DATABASE_URL=postgresql+asyncpg://codex_lb:codex_lb@127.0.0.1:5432/codex_lb
CODEX_LB_DATABASE_MIGRATE_ON_STARTUP=true
CODEX_LB_DATABASE_SQLITE_PRE_MIGRATE_BACKUP_ENABLED=true
CODEX_LB_DATABASE_SQLITE_PRE_MIGRATE_BACKUP_MAX_FILES=5

# Upstream ChatGPT base URL (no /codex suffix)
CODEX_LB_UPSTREAM_BASE_URL=https://chatgpt.com/backend-api

# Anthropic SDK runtime
# Optional explicit Claude CLI path when auto-discovery via PATH is not enough
# CODEX_LB_ANTHROPIC_SDK_CLI_PATH=/usr/local/bin/claude
# Optional default session ID for SDK conversation continuity
# CODEX_LB_ANTHROPIC_SDK_DEFAULT_SESSION_ID=codex-lb-default

# Anthropic direct API runtime (/claude-api/v1/messages)
CODEX_LB_ANTHROPIC_API_BASE_URL=https://api.anthropic.com
CODEX_LB_ANTHROPIC_API_VERSION=2023-06-01
# CODEX_LB_ANTHROPIC_API_BETA=
CODEX_LB_ANTHROPIC_API_TIMEOUT_SECONDS=300
CODEX_LB_ANTHROPIC_API_DETECT_CLI_HEADERS=true
CODEX_LB_ANTHROPIC_API_SYSTEM_PROMPT_INJECTION_MODE=minimal
CODEX_LB_ANTHROPIC_OAUTH_TOKEN_URL=https://console.anthropic.com/v1/oauth/token
CODEX_LB_ANTHROPIC_OAUTH_CLIENT_ID=9d1c250a-e61b-44d9-88ed-5944d1962f5e

# Anthropic usage (5h/7d)
CODEX_LB_ANTHROPIC_USAGE_BASE_URL=https://api.anthropic.com
CODEX_LB_ANTHROPIC_USAGE_BETA=oauth-2025-04-20
CODEX_LB_ANTHROPIC_USAGE_REFRESH_ENABLED=true

# Anthropic auth discovery (Linux-only POC)
CODEX_LB_ANTHROPIC_CREDENTIALS_DISCOVERY_ENABLED=true
# CODEX_LB_ANTHROPIC_CREDENTIALS_FILE=~/.claude/.credentials.json
# CODEX_LB_ANTHROPIC_CREDENTIALS_HELPER_COMMAND=
# Explicit override (if set, used before discovery)
# CODEX_LB_ANTHROPIC_USAGE_BEARER_TOKEN=sk-ant-oat01-...
CODEX_LB_ANTHROPIC_AUTO_DISCOVER_ORG=false
CODEX_LB_ANTHROPIC_CREDENTIALS_CACHE_SECONDS=60
CODEX_LB_ANTHROPIC_DEFAULT_ACCOUNT_ID=anthropic_default
CODEX_LB_ANTHROPIC_DEFAULT_ACCOUNT_EMAIL=anthropic@local
CODEX_LB_ANTHROPIC_DEFAULT_PLAN_TYPE=pro

# Timeouts (seconds)
CODEX_LB_UPSTREAM_CONNECT_TIMEOUT_SECONDS=30
CODEX_LB_STREAM_IDLE_TIMEOUT_SECONDS=300

# OAuth / token refresh
CODEX_LB_AUTH_BASE_URL=https://auth.openai.com
CODEX_LB_OAUTH_CLIENT_ID=app_EMoamEEZ73f0CkXaXp7hrann
CODEX_LB_OAUTH_SCOPE="openid profile email"
CODEX_LB_OAUTH_TIMEOUT_SECONDS=30
CODEX_LB_OAUTH_REDIRECT_URI=http://localhost:1455/auth/callback
CODEX_LB_OAUTH_CALLBACK_HOST=127.0.0.1
# Do not change the port. OpenAI dislikes changes.
CODEX_LB_OAUTH_CALLBACK_PORT=1455
CODEX_LB_TOKEN_REFRESH_TIMEOUT_SECONDS=30
CODEX_LB_TOKEN_REFRESH_INTERVAL_DAYS=8

# Encryption key file (optional override; recommended for Docker volumes)
# CODEX_LB_ENCRYPTION_KEY_FILE=/var/lib/codex-lb/encryption.key

# Upstream usage fetch
CODEX_LB_USAGE_FETCH_TIMEOUT_SECONDS=10
CODEX_LB_USAGE_FETCH_MAX_RETRIES=2
CODEX_LB_USAGE_REFRESH_ENABLED=true
CODEX_LB_USAGE_REFRESH_INTERVAL_SECONDS=60

# Dashboard authentication is configured in the settings UI
